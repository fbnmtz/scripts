#!/usr/bin/env bash
#
# ############################################################################
# Project: scripts (none)
# File...: mdisk
# Created: Sunday, 2022/02/27 - 15:31:50
# Author.: @fbnmtz, fgm (fabiano.matoz@gmail.com)
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Last Modified: Friday, 2023/08/18 - 21:46:17
# Modified By..: @fbnmtz, (fabiano.matoz@gmail.com)
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Version: 0.1.4.174
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Description: 
#  >
#  > https://www.cyberciti.biz/faq/linux-backup-restore-a-partition-table-with-sfdisk-command/
# ############################################################################
# HISTORY:
#

# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~    
# shellcheck disable=SC1090,SC2154    
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~    
source ~/bin/xSHELL/init    
use args mdisk.lib
xrequirements lsblk grep awk aw printf sfdisk smartctl mdate cut rev
xsetHome

# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~    
xarg --id -l,--list      --var action:list       --desc "list all disks on device"    
xarg --id -m,--mounted   --var action:mounted    --desc "list mounted disks on device"    
xarg --id -u,--unmounted --var action:unmounted  --desc "list unmounted disks on device"    
xarg --id -b,--backup    --var action:bkp,disk+o --desc "backup disk info"    

xrun --xreject-unknow --xrequire-one --xversionrc --xcolors "$@"    

case "$action" in    
    bkp      ) _preBackup ;;    
    mounted  ) _mounted   ;;
    unmounted) _unmounted ;;
    list     ) _list      ;;
    # restore) sfdisk /dev/sda < /path/to/usb/pen/sda.partition.table.12-30-2015.txt ;;
esac    
    