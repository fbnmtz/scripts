#!/usr/bin/env bash
#
# ############################################################################
# Project: scripts (none)
# File...: mpdctl.lib
# Created: Thursday, 2023/07/20 - 00:02:53
# Author.: @fbnmtz, (fabiano.matoz@gmail.com)
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Last Modified: Saturday, 2023/07/29 - 18:05:40
# Modified By..: @fbnmtz, (fabiano.matoz@gmail.com)
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Version: 0.0.4.107
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Description: 
#  >
# ############################################################################
# HISTORY:
#

_xLIB_MPDCTL_=true

# set ROFI command and arguments
_ROFI="rofi -no-config -dmenu -i -p"

# validates rofi installation
xrequirements rofi

mUpdate(){
  mpc update --wait; mpc rescan --wait
}

mPlayAll(){
  mpc listall | mpc add; mpc play
}

mListPlay(){
  local music=$(mpc playlist | $_ROFI "Select one Music" -format "d%s"); 
  if [ -n "$music" ]; then 
    local index=$(echo "$music" | cut -d '%' -f1) 
    echo "$music";
    echo $index
    mpc play "$index"
  fi
}

mLoad(){
  local menu="clear\nall\n"
  menu+=$(mpc lsplaylists)
  choice=$(echo -e "$menu" | $_ROFI "Playlist Functions")

  if [ -n "$choice" ]; then
    case "$choice" in
      clear) mpc clear ;;
      all  ) mpc listall | mpc add ;;
      *    ) mpc clear && mpc load "$choice" && mpc play ;;
    esac
  fi
}