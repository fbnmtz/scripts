#!/usr/bin/env bash
#
# ############################################################################
# Project: scripts (none)
# File...: getMail.lib
# Created: Tuesday, 2023/04/25 - 20:14:21
# Author.: @fbnmtz, (fabiano.matoz@gmail.com)
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Last Modified: Tuesday, 2023/04/25 - 22:06:12
# Modified By..: @fbnmtz, (fabiano.matoz@gmail.com)
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Version: 0.0.2.111
# ~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~·~·~·~·~·~·~·~~·~·~·~·~·~~·~·~·~·~·~·~·~
# Description: 
#  >
# ############################################################################
# HISTORY:
#
use utils io

_xLIB_GETMAIL_=true

# create default data directory
xsetHome
MAILSTORE="$APP_HOME/mails"
[ ! -f "$MAILSTORE" ] && touch "$MAILSTORE"

MAILCONF=$APP_HOME/$APP.cfg
_EDITOR=$(rconfig editor "$MAILCONF")

# rofi confi
ROFICMD="rofi -no-config -columns 1 -lines 7 -i -dmenu -fuzzy -p \"Select a mail\""
DMENUCMD="dmenu -p \"Select a mail\""

[ -z "$_EDITOR" ] && _EDITOR=$(getPath vim nano code gedit micro code sublime)

xNew(){
  if grep "$1" "$MAILSTORE"; then
    exit
  else
    echo "$1" >> "$MAILSTORE"
  fi
}

xMenu(){
  mail=$(eval "$ROFICMD" < "$MAILSTORE")
  # mail=$(eval "$DMENUCMD" < "$MAILSTORE")

  [ -n "$mail" ] && echo "$mail" | xsys.clipboard
}